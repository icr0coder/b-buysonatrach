CREATE TABLE  "ABSENCE" 
   (	"CODE_AB" VARCHAR2(3), 
	"JUSTIFICATION" VARCHAR2(20), 
	 CONSTRAINT "ABSENCE_PK" PRIMARY KEY ("CODE_AB") ENABLE
   )
/
CREATE TABLE  "ABSENTER" 
   (	"MATRICULE" VARCHAR2(20), 
	"CODE_AB" VARCHAR2(3), 
	"DATE_AB" DATE, 
	 CONSTRAINT "ABSENTER_CON" PRIMARY KEY ("MATRICULE", "DATE_AB") ENABLE, 
	 CONSTRAINT "ABSENTER_FK" FOREIGN KEY ("MATRICULE")
	  REFERENCES  "APPRENTI" ("MATRICULE") ENABLE, 
	 CONSTRAINT "ABSENTER_FK2" FOREIGN KEY ("CODE_AB")
	  REFERENCES  "ABSENCE" ("CODE_AB") ENABLE
   )
/
CREATE TABLE  "APPRENTI" 
   (	"MATRICULE" VARCHAR2(20) NOT NULL ENABLE, 
	"NOM" VARCHAR2(50), 
	"PRENOM" VARCHAR2(50), 
	"DATE_N" DATE, 
	"DATE_REC" DATE, 
	"DATE_FINC" DATE, 
	"N_SS" VARCHAR2(50), 
	"GROUPE_S" VARCHAR2(2), 
	"TYPE_P" VARCHAR2(3), 
	"COD_BNC" VARCHAR2(10), 
	"ACTIF" VARCHAR2(1), 
	"COD_F" NUMBER, 
	"ID_DPT" VARCHAR2(10), 
	 CONSTRAINT "APPRENTI_PK" PRIMARY KEY ("MATRICULE") ENABLE, 
	 CONSTRAINT "APPRENTI_CON" FOREIGN KEY ("COD_F")
	  REFERENCES  "FONCTION" ("ID") ENABLE, 
	 CONSTRAINT "APPRENTI_CON1" FOREIGN KEY ("ID_DPT")
	  REFERENCES  "DEPARTEMENT" ("ID_DPT") ENABLE
   )
/
CREATE TABLE  "BANQUE" 
   (	"ID" NUMBER NOT NULL ENABLE, 
	"NOM_BANQUE" VARCHAR2(60), 
	 CONSTRAINT "BANQUE_PK" PRIMARY KEY ("ID") ENABLE
   )
/
CREATE TABLE  "DEPARTEMENT" 
   (	"ID_DPT" VARCHAR2(10) NOT NULL ENABLE, 
	"NOM_DPT" VARCHAR2(75), 
	"ID_DRC" VARCHAR2(10), 
	 CONSTRAINT "DEPARTEMENT_PK" PRIMARY KEY ("ID_DPT") ENABLE, 
	 CONSTRAINT "DEPARTEMENT_FK" FOREIGN KEY ("ID_DRC")
	  REFERENCES  "DIRECTION" ("ID_DRC") ENABLE
   )
/
CREATE TABLE  "DIRECTION" 
   (	"ID_DRC" VARCHAR2(10) NOT NULL ENABLE, 
	"NOM_DRC" VARCHAR2(70), 
	 CONSTRAINT "DIRECTION_PK" PRIMARY KEY ("ID_DRC") ENABLE
   )
/
CREATE TABLE  "FONCTION" 
   (	"ID" NUMBER NOT NULL ENABLE, 
	"NOM_FONCTION" VARCHAR2(60), 
	 CONSTRAINT "FONCTION_PK" PRIMARY KEY ("ID") ENABLE
   )
/

CREATE OR REPLACE TRIGGER  "BI_FONCTION" 
  before insert on "FONCTION"               
  for each row  
begin   
    select "FONCTION_SEQ".nextval into :NEW.ID from dual; 
end; 

/
ALTER TRIGGER  "BI_FONCTION" ENABLE
/
CREATE TABLE  "PAIE" 
   (	"MATRICULE" VARCHAR2(50), 
	"ID_PAIE" VARCHAR2(50), 
	"GAINBASE" VARCHAR2(10), 
	"GAINRETENUE" VARCHAR2(10), 
	"GAINNET" VARCHAR2(10), 
	 CONSTRAINT "PAIE_PK" PRIMARY KEY ("MATRICULE", "ID_PAIE") ENABLE, 
	 CONSTRAINT "PAIE_FK" FOREIGN KEY ("MATRICULE")
	  REFERENCES  "APPRENTI" ("MATRICULE") ENABLE, 
	 CONSTRAINT "PAIE_CONFK2" FOREIGN KEY ("ID_PAIE")
	  REFERENCES  "TB_PAIE" ("ID_PAIE") ENABLE
   )
/
CREATE TABLE  "TB_PAIE" 
   (	"ID_PAIE" VARCHAR2(50) NOT NULL ENABLE, 
	"DATE_PAIE" VARCHAR2(6) NOT NULL ENABLE, 
	"CLOTURE" NUMBER, 
	 CONSTRAINT "TB_PAIE_PK" PRIMARY KEY ("ID_PAIE") ENABLE
   )
/
CREATE TABLE  "TB_VARS" 
   (	"T_S1" NUMBER, 
	"T_S2" NUMBER, 
	"T_S3" NUMBER, 
	"T_S4" NUMBER, 
	"T_S5" NUMBER, 
	"T_S6" NUMBER, 
	"SMG" NUMBER, 
	"DATE_INI" DATE
   )
/
CREATE TABLE  "TUSER" 
   (	"ID" NUMBER NOT NULL ENABLE, 
	"USERNAME" VARCHAR2(10), 
	"PASSWORD" VARCHAR2(60), 
	"TYPE" VARCHAR2(3), 
	 CONSTRAINT "TUSER_PK" PRIMARY KEY ("ID") ENABLE
   )
/

CREATE OR REPLACE TRIGGER  "BI_TUSER" 
  before insert on "TUSER"               
  for each row  
begin   
    select "TUSER_SEQ".nextval into :NEW.ID from dual; 
end; 

/
ALTER TRIGGER  "BI_TUSER" ENABLE
/
